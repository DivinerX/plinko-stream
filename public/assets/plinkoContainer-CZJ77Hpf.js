import{a as ge,r as l,j as a,R as _,u as ve,b as Se}from"./index-BsPzyTEk.js";import{w as we}from"./withLayout-DLnGlT7W.js";ge();const ye={low:{8:[6,2.1,1.1,.93,.46,.93,1.1,2.1,6],9:[7,2,1.6,.94,.65,.65,.94,1.6,2,7],10:[9,3,1.4,1.1,.92,.47,.92,1.1,1.4,3,9],11:[9,3,1.9,1.3,.93,.66,.66,.93,1.3,1.9,3,9],12:[11,3,1.6,1.4,1.1,.92,.46,.92,1.1,1.4,1.6,3,11],13:[22,4,3,1.9,1.2,.83,.65,.65,.83,1.2,1.9,3,4,22],14:[22,4,1.9,1.4,1.3,1.1,.91,.46,.91,1.1,1.3,1.4,1.9,4,22],15:[38,8,3,2,1.5,1.1,.93,.65,.65,.93,1.1,1.5,2,3,8,38],16:[71,9,2,1.4,1.4,1.2,1.1,.91,.45,.91,1.1,1.2,1.4,1.4,2,9,71]},medium:{8:[13,3,1.3,.63,.37,.63,1.3,3,13],9:[18,4,1.7,.83,.46,.46,.83,1.7,4,18],10:[23,5,2,1.4,.53,.35,.53,1.4,2,5,23],11:[25,6,3,1.8,.63,.46,.46,.63,1.8,3,6,25],12:[34,11,4,2,1.1,.52,.26,.52,1.1,2,4,11,34],13:[53,13,6,3,1.3,.62,.36,.36,.62,1.3,3,6,13,53],14:[73,15,7,4,1.9,1,.41,.16,.41,1,1.9,4,7,15,73],15:[96,18,11,5,3,1.3,.42,.26,.26,.42,1.3,3,5,11,18,96],16:[170,41,10,5,3,1.5,1,.41,.25,.41,1,1.5,3,5,10,41,170]},high:{8:[29,4,1.5,.23,.16,.23,1.5,4,29],9:[44,7,2,.51,.17,.17,.51,2,7,44],10:[77,10,3,.9,.22,.16,.22,.9,3,10,77],11:[123,14,5.2,1.4,.32,.16,.16,.32,1.4,5.2,14,123],12:[174,24,8.1,2,.7,.13,.13,.13,.7,2,8.1,24,174],13:[274,37,11,4,1,.14,.14,.14,.14,1,4,11,37,274],14:[429,56,18,5,1.9,.3,.13,.13,.13,.3,1.9,5,18,56,429],15:[643,83,27,8,3,.5,.14,.14,.14,.14,.5,3,8,27,83,643],16:[1030,130,26,9,4,2,.2,.12,.14,.12,.2,2,4,9,26,130,1030]}},Ce=({positions:e,rows:t,risk:o,collisions:r,win:n})=>{var O,K;const i=l.useRef(null),s=l.useRef(null),[c,d]=l.useState(1),m=l.useRef(null),S=l.useRef(null),u=500*c,f=25*c,[v,h]=l.useState(new Map),x=l.useRef(null),b=l.useRef(null),p=l.useRef(null),R=l.useRef(null),w=l.useRef(null);l.useEffect(()=>{const C=()=>{const y=performance.now();h(g=>{const N=new Map(g);for(const[E,D]of g.entries()){const P=(y-D.startTime)/1e3;P>=2?N.delete(E):N.set(E,{...D,elapsed:P})}return N}),x.current=requestAnimationFrame(C)};return x.current=requestAnimationFrame(C),b.current=new Audio("/sounds/plinko/ball.wav"),p.current=new Audio("/sounds/plinko/multiplier-low.wav"),R.current=new Audio("/sounds/plinko/multiplier-good.wav"),w.current=new Audio("/sounds/plinko/multiplier-best.wav"),b.current.load(),p.current.load(),R.current.load(),w.current.load(),()=>{b.current=null,p.current=null,R.current=null,w.current=null,x.current&&cancelAnimationFrame(x.current)}},[]),l.useEffect(()=>{r.length>0&&b.current&&(b.current.currentTime=0,b.current.play().catch(C=>console.warn("Audio play failed:",C)))},[r]),l.useEffect(()=>{const C=n[n.length-1];C&&(C.multiplier<1&&p.current?(p.current.currentTime=0,p.current.play().catch(y=>console.warn("Audio play failed:",y))):C.multiplier<2&&R.current?(R.current.currentTime=0,R.current.play().catch(y=>console.warn("Audio play failed:",y))):w.current&&(w.current.currentTime=0,w.current.play().catch(y=>console.warn("Audio play failed:",y))))},[n.length]),l.useEffect(()=>{const C=n[n.length-1];C&&C.sink!==void 0&&h(y=>{const g=new Map(y);return g.set(C.sink,{startTime:performance.now(),elapsed:0}),g})},[n.length]),l.useEffect(()=>()=>{h(new Map),x.current&&cancelAnimationFrame(x.current)},[]),l.useEffect(()=>{if(i.current&&s.current){const C=()=>{if(i.current&&s.current){const y=Math.min(i.current.clientWidth/u,s.current.clientHeight/u);d(y)}};return C(),m.current=new ResizeObserver(C),m.current.observe(i.current),S.current=new ResizeObserver(C),S.current.observe(s.current),()=>{m.current&&m.current.disconnect(),S.current&&S.current.disconnect()}}},[]);const j=()=>{let C=[],y=0;for(let g=0;g<t;g++){const N=1+g,E=N*f;for(let D=0;D<N;D++){const P=u/2-E/2+D*f+f/2,M=u/t+g*f+f,A={x:P,y:M,collided:!1,id:y++};C.push(A)}}return C.map((g,N)=>a.jsx("div",{className:`absolute rounded-full bg-white transition-all duration-75 ${r.includes(g.id)?"ring-2 inset-ring-indigo-400":""}`,id:g.id.toString(),style:{left:g.x,top:g.y,width:8*c,height:8*c,transform:"translate(-50%, -50%)"}},N))},k=(C,y)=>{const g=ye[C][y],N=[];let E=u/2-f/2*y-f,D=0;return g.forEach(P=>{const M={x:E+f,y:u/y+y*f+f,id:D++,collided:!1,multiplier:P};E=M.x,N.push(M)}),N.map((P,M)=>{const A=v.get(M),I=A?Math.sin(A.elapsed*Math.PI*2)*10*c*Math.exp(-A.elapsed):0;return a.jsxs("div",{className:`absolute transition-all duration-75 flex items-center justify-center pointer-events-none 
            ${P.collided?"ring-2 inset-ring-indigo-400":""} 
            ${P.multiplier<1?"bg-red-800":P.multiplier<2?"bg-yellow-800":"bg-green-800"}
            ${A?"z-10":""}
          `,id:P.id.toString(),style:{left:P.x,top:P.y+I,width:22*c,height:12*c,fontSize:6*c,transform:"translate(-50%, -100%)",transition:A?"none":void 0},children:[P.multiplier,"X"]},M)})},B=()=>e.map(({player:C,positions:y})=>y.map(([g,N])=>a.jsx("div",{className:"absolute bg-red-500 rounded-full",style:{left:N.x*c,top:N.y*c,width:10*c,height:10*c,transform:"translate(-50%, -50%)"}},`${C}-${g}`)));return a.jsx("div",{className:"flex flex-col h-[calc(100vh-70px)] p-0 w-[calc(100%-350px)] items-center",ref:s,style:{backgroundImage:`
        radial-gradient(circle at center,
          transparent 0%,
          rgba(29,33,38, 0.7) 50%,
          rgba(29,33,38, 0.9) 70%,
          rgba(29,33,38, 1) 100%
        ),
        url(/images/plinko/bg.jpg)
      `,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:a.jsxs("div",{ref:i,className:"relative",style:{width:Math.min(((O=s.current)==null?void 0:O.clientHeight)||0,((K=s.current)==null?void 0:K.clientWidth)||0)},children:[B(),j(),k(o,t)]})})};function te(e,[t,o]){return Math.min(o,Math.max(t,e))}function V(e,t,{checkForDefaultPrevented:o=!0}={}){return function(n){if(e==null||e(n),o===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function q(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ne(...e){return t=>{let o=!1;const r=e.map(n=>{const i=q(n,t);return!o&&typeof i=="function"&&(o=!0),i});if(o)return()=>{for(let n=0;n<r.length;n++){const i=r[n];typeof i=="function"?i():q(e[n],null)}}}}function T(...e){return l.useCallback(ne(...e),e)}function oe(e,t=[]){let o=[];function r(i,s){const c=l.createContext(s),d=o.length;o=[...o,s];const m=u=>{var p;const{scope:f,children:v,...h}=u,x=((p=f==null?void 0:f[e])==null?void 0:p[d])||c,b=l.useMemo(()=>h,Object.values(h));return a.jsx(x.Provider,{value:b,children:v})};m.displayName=i+"Provider";function S(u,f){var x;const v=((x=f==null?void 0:f[e])==null?void 0:x[d])||c,h=l.useContext(v);if(h)return h;if(s!==void 0)return s;throw new Error(`\`${u}\` must be used within \`${i}\``)}return[m,S]}const n=()=>{const i=o.map(s=>l.createContext(s));return function(c){const d=(c==null?void 0:c[e])||i;return l.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return n.scopeName=e,[r,je(n,...t)]}function je(...e){const t=e[0];if(e.length===1)return t;const o=()=>{const r=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const s=r.reduce((c,{useScope:d,scopeName:m})=>{const u=d(i)[`__scope${m}`];return{...c,...u}},{});return l.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return o.scopeName=t.scopeName,o}function re(e){const t=l.useRef(e);return l.useEffect(()=>{t.current=e}),l.useMemo(()=>(...o)=>{var r;return(r=t.current)==null?void 0:r.call(t,...o)},[])}function Re({prop:e,defaultProp:t,onChange:o=()=>{}}){const[r,n]=Ne({defaultProp:t,onChange:o}),i=e!==void 0,s=i?e:r,c=re(o),d=l.useCallback(m=>{if(i){const u=typeof m=="function"?m(e):m;u!==e&&c(u)}else n(m)},[i,e,n,c]);return[s,d]}function Ne({defaultProp:e,onChange:t}){const o=l.useState(e),[r]=o,n=l.useRef(r),i=re(t);return l.useEffect(()=>{n.current!==r&&(i(r),n.current=r)},[r,n,i]),o}var Pe=l.createContext(void 0);function Ee(e){const t=l.useContext(Pe);return e||t||"ltr"}function Ae(e){const t=l.useRef({value:e,previous:e});return l.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Me=globalThis!=null&&globalThis.document?l.useLayoutEffect:()=>{};function De(e){const[t,o]=l.useState(void 0);return Me(()=>{if(e){o({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const i=n[0];let s,c;if("borderBoxSize"in i){const d=i.borderBoxSize,m=Array.isArray(d)?d[0]:d;s=m.inlineSize,c=m.blockSize}else s=e.offsetWidth,c=e.offsetHeight;o({width:s,height:c})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else o(void 0)},[e]),t}var L=l.forwardRef((e,t)=>{const{children:o,...r}=e,n=l.Children.toArray(o),i=n.find(Ie);if(i){const s=i.props.children,c=n.map(d=>d===i?l.Children.count(s)>1?l.Children.only(null):l.isValidElement(s)?s.props.children:null:d);return a.jsx(H,{...r,ref:t,children:l.isValidElement(s)?l.cloneElement(s,void 0,c):null})}return a.jsx(H,{...r,ref:t,children:o})});L.displayName="Slot";var H=l.forwardRef((e,t)=>{const{children:o,...r}=e;if(l.isValidElement(o)){const n=Te(o),i=_e(r,o.props);return o.type!==l.Fragment&&(i.ref=t?ne(t,n):n),l.cloneElement(o,i)}return l.Children.count(o)>1?l.Children.only(null):null});H.displayName="SlotClone";var ke=({children:e})=>a.jsx(a.Fragment,{children:e});function Ie(e){return l.isValidElement(e)&&e.type===ke}function _e(e,t){const o={...t};for(const r in t){const n=e[r],i=t[r];/^on[A-Z]/.test(r)?n&&i?o[r]=(...c)=>{i(...c),n(...c)}:n&&(o[r]=n):r==="style"?o[r]={...n,...i}:r==="className"&&(o[r]=[n,i].filter(Boolean).join(" "))}return{...e,...o}}function Te(e){var r,n;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,o=t&&"isReactWarning"in t&&t.isReactWarning;return o?e.ref:(t=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,o=t&&"isReactWarning"in t&&t.isReactWarning,o?e.props.ref:e.props.ref||e.ref)}var Oe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],W=Oe.reduce((e,t)=>{const o=l.forwardRef((r,n)=>{const{asChild:i,...s}=r,c=i?L:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...s,ref:n})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function Ve(e){const t=e+"CollectionProvider",[o,r]=oe(t),[n,i]=o(t,{collectionRef:{current:null},itemMap:new Map}),s=v=>{const{scope:h,children:x}=v,b=_.useRef(null),p=_.useRef(new Map).current;return a.jsx(n,{scope:h,itemMap:p,collectionRef:b,children:x})};s.displayName=t;const c=e+"CollectionSlot",d=_.forwardRef((v,h)=>{const{scope:x,children:b}=v,p=i(c,x),R=T(h,p.collectionRef);return a.jsx(L,{ref:R,children:b})});d.displayName=c;const m=e+"CollectionItemSlot",S="data-radix-collection-item",u=_.forwardRef((v,h)=>{const{scope:x,children:b,...p}=v,R=_.useRef(null),w=T(h,R),j=i(m,x);return _.useEffect(()=>(j.itemMap.set(R,{ref:R,...p}),()=>void j.itemMap.delete(R))),a.jsx(L,{[S]:"",ref:w,children:b})});u.displayName=m;function f(v){const h=i(e+"CollectionConsumer",v);return _.useCallback(()=>{const b=h.collectionRef.current;if(!b)return[];const p=Array.from(b.querySelectorAll(`[${S}]`));return Array.from(h.itemMap.values()).sort((j,k)=>p.indexOf(j.ref.current)-p.indexOf(k.ref.current))},[h.collectionRef,h.itemMap])}return[{Provider:s,Slot:d,ItemSlot:u},f,r]}var se=["PageUp","PageDown"],ie=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],le={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},z="Slider",[F,ze,Be]=Ve(z),[ce,nt]=oe(z,[Be]),[Ke,$]=ce(z),ae=l.forwardRef((e,t)=>{const{name:o,min:r=0,max:n=100,step:i=1,orientation:s="horizontal",disabled:c=!1,minStepsBetweenThumbs:d=0,defaultValue:m=[r],value:S,onValueChange:u=()=>{},onValueCommit:f=()=>{},inverted:v=!1,form:h,...x}=e,b=l.useRef(new Set),p=l.useRef(0),w=s==="horizontal"?Le:We,[j=[],k]=Re({prop:S,defaultProp:m,onChange:g=>{var E;(E=[...b.current][p.current])==null||E.focus(),u(g)}}),B=l.useRef(j);function O(g){const N=Ye(j,g);y(g,N)}function K(g){y(g,p.current)}function C(){const g=B.current[p.current];j[p.current]!==g&&f(j)}function y(g,N,{commit:E}={commit:!1}){const D=Je(i),P=Ze(Math.round((g-r)/i)*i+r,D),M=te(P,[r,n]);k((A=[])=>{const I=Fe(A,M,N);if(qe(I,d*i)){p.current=I.indexOf(M);const G=String(I)!==String(A);return G&&E&&f(I),G?I:A}else return A})}return a.jsx(Ke,{scope:e.__scopeSlider,name:o,disabled:c,min:r,max:n,valueIndexToChangeRef:p,thumbs:b.current,values:j,orientation:s,form:h,children:a.jsx(F.Provider,{scope:e.__scopeSlider,children:a.jsx(F.Slot,{scope:e.__scopeSlider,children:a.jsx(w,{"aria-disabled":c,"data-disabled":c?"":void 0,...x,ref:t,onPointerDown:V(x.onPointerDown,()=>{c||(B.current=j)}),min:r,max:n,inverted:v,onSlideStart:c?void 0:O,onSlideMove:c?void 0:K,onSlideEnd:c?void 0:C,onHomeKeyDown:()=>!c&&y(r,0,{commit:!0}),onEndKeyDown:()=>!c&&y(n,j.length-1,{commit:!0}),onStepKeyDown:({event:g,direction:N})=>{if(!c){const P=se.includes(g.key)||g.shiftKey&&ie.includes(g.key)?10:1,M=p.current,A=j[M],I=i*P*N;y(A+I,M,{commit:!0})}}})})})})});ae.displayName=z;var[ue,de]=ce(z,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Le=l.forwardRef((e,t)=>{const{min:o,max:r,dir:n,inverted:i,onSlideStart:s,onSlideMove:c,onSlideEnd:d,onStepKeyDown:m,...S}=e,[u,f]=l.useState(null),v=T(t,w=>f(w)),h=l.useRef(void 0),x=Ee(n),b=x==="ltr",p=b&&!i||!b&&i;function R(w){const j=h.current||u.getBoundingClientRect(),k=[0,j.width],O=X(k,p?[o,r]:[r,o]);return h.current=j,O(w-j.left)}return a.jsx(ue,{scope:e.__scopeSlider,startEdge:p?"left":"right",endEdge:p?"right":"left",direction:p?1:-1,size:"width",children:a.jsx(fe,{dir:x,"data-orientation":"horizontal",...S,ref:v,style:{...S.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const j=R(w.clientX);s==null||s(j)},onSlideMove:w=>{const j=R(w.clientX);c==null||c(j)},onSlideEnd:()=>{h.current=void 0,d==null||d()},onStepKeyDown:w=>{const k=le[p?"from-left":"from-right"].includes(w.key);m==null||m({event:w,direction:k?-1:1})}})})}),We=l.forwardRef((e,t)=>{const{min:o,max:r,inverted:n,onSlideStart:i,onSlideMove:s,onSlideEnd:c,onStepKeyDown:d,...m}=e,S=l.useRef(null),u=T(t,S),f=l.useRef(void 0),v=!n;function h(x){const b=f.current||S.current.getBoundingClientRect(),p=[0,b.height],w=X(p,v?[r,o]:[o,r]);return f.current=b,w(x-b.top)}return a.jsx(ue,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:a.jsx(fe,{"data-orientation":"vertical",...m,ref:u,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const b=h(x.clientY);i==null||i(b)},onSlideMove:x=>{const b=h(x.clientY);s==null||s(b)},onSlideEnd:()=>{f.current=void 0,c==null||c()},onStepKeyDown:x=>{const p=le[v?"from-bottom":"from-top"].includes(x.key);d==null||d({event:x,direction:p?-1:1})}})})}),fe=l.forwardRef((e,t)=>{const{__scopeSlider:o,onSlideStart:r,onSlideMove:n,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:c,onStepKeyDown:d,...m}=e,S=$(z,o);return a.jsx(W.span,{...m,ref:t,onKeyDown:V(e.onKeyDown,u=>{u.key==="Home"?(s(u),u.preventDefault()):u.key==="End"?(c(u),u.preventDefault()):se.concat(ie).includes(u.key)&&(d(u),u.preventDefault())}),onPointerDown:V(e.onPointerDown,u=>{const f=u.target;f.setPointerCapture(u.pointerId),u.preventDefault(),S.thumbs.has(f)?f.focus():r(u)}),onPointerMove:V(e.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&n(u)}),onPointerUp:V(e.onPointerUp,u=>{const f=u.target;f.hasPointerCapture(u.pointerId)&&(f.releasePointerCapture(u.pointerId),i(u))})})}),me="SliderTrack",pe=l.forwardRef((e,t)=>{const{__scopeSlider:o,...r}=e,n=$(me,o);return a.jsx(W.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...r,ref:t})});pe.displayName=me;var U="SliderRange",he=l.forwardRef((e,t)=>{const{__scopeSlider:o,...r}=e,n=$(U,o),i=de(U,o),s=l.useRef(null),c=T(t,s),d=n.values.length,m=n.values.map(f=>be(f,n.min,n.max)),S=d>1?Math.min(...m):0,u=100-Math.max(...m);return a.jsx(W.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...r,ref:c,style:{...e.style,[i.startEdge]:S+"%",[i.endEdge]:u+"%"}})});he.displayName=U;var Y="SliderThumb",xe=l.forwardRef((e,t)=>{const o=ze(e.__scopeSlider),[r,n]=l.useState(null),i=T(t,c=>n(c)),s=l.useMemo(()=>r?o().findIndex(c=>c.ref.current===r):-1,[o,r]);return a.jsx($e,{...e,ref:i,index:s})}),$e=l.forwardRef((e,t)=>{const{__scopeSlider:o,index:r,name:n,...i}=e,s=$(Y,o),c=de(Y,o),[d,m]=l.useState(null),S=T(t,R=>m(R)),u=d?s.form||!!d.closest("form"):!0,f=De(d),v=s.values[r],h=v===void 0?0:be(v,s.min,s.max),x=Ue(r,s.values.length),b=f==null?void 0:f[c.size],p=b?Xe(b,h,c.direction):0;return l.useEffect(()=>{if(d)return s.thumbs.add(d),()=>{s.thumbs.delete(d)}},[d,s.thumbs]),a.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${h}% + ${p}px)`},children:[a.jsx(F.ItemSlot,{scope:e.__scopeSlider,children:a.jsx(W.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":s.min,"aria-valuenow":v,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:S,style:v===void 0?{display:"none"}:e.style,onFocus:V(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),u&&a.jsx(He,{name:n??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:v},r)]})});xe.displayName=Y;var He=e=>{const{value:t,...o}=e,r=l.useRef(null),n=Ae(t);return l.useEffect(()=>{const i=r.current,s=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(s,"value").set;if(n!==t&&d){const m=new Event("input",{bubbles:!0});d.call(i,t),i.dispatchEvent(m)}},[n,t]),a.jsx("input",{style:{display:"none"},...o,ref:r,defaultValue:t})};function Fe(e=[],t,o){const r=[...e];return r[o]=t,r.sort((n,i)=>n-i)}function be(e,t,o){const i=100/(o-t)*(e-t);return te(i,[0,100])}function Ue(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Ye(e,t){if(e.length===1)return 0;const o=e.map(n=>Math.abs(n-t)),r=Math.min(...o);return o.indexOf(r)}function Xe(e,t,o){const r=e/2,i=X([0,50],[0,r]);return(r-i(t)*o)*o}function Ge(e){return e.slice(0,-1).map((t,o)=>e[o+1]-t)}function qe(e,t){if(t>0){const o=Ge(e);return Math.min(...o)>=t}return!0}function X(e,t){return o=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(o-e[0])}}function Je(e){return(String(e).split(".")[1]||"").length}function Ze(e,t){const o=Math.pow(10,t);return Math.round(e*o)/o}var J=ae,Z=pe,Q=he,ee=xe;const Qe=({option:e,setOption:t,bet:o,setBet:r,risk:n,setRisk:i,rows:s,setRows:c,balls:d,setBalls:m,play:S,isRunning:u})=>{const f=h=>{c(h[0])},v=h=>{m(h[0])};return a.jsxs("div",{className:"fixed right-0 t-0 flex flex-col min-w-[350px] h-[calc(100vh-70px)] bg-[#31353d] overflow-y-auto",children:[a.jsxs("div",{className:"flex flex-row w-full text-center font-[flamasb]",children:[a.jsx("div",{className:"w-1/2 p-4 cursor-pointer",style:{borderBottomColor:e==="manual"?"#de4c41":"#262a30",borderBottomWidth:"3px",borderBottomStyle:"solid",color:e==="manual"?"#fff":"#bcbebf"},onClick:()=>t("manual"),children:a.jsx("p",{children:"MANUAL"})}),a.jsx("div",{className:"w-1/2 p-4 cursor-pointer",style:{borderBottomColor:e==="auto"?"#de4c41":"#262a30",borderBottomWidth:"3px",borderBottomStyle:"solid",color:e==="auto"?"#fff":"#bcbebf"},onClick:()=>t("auto"),children:a.jsx("p",{children:"AUTO"})})]}),a.jsxs("div",{className:"flex flex-col justify-between h-full",children:[a.jsxs("div",{className:"flex flex-col p-4 gap-8",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[#bcbebf] text-sm font-[flamasb]",children:"BET"}),a.jsxs("div",{className:"flex flex-row items-center w-full p-2 rounded-md bg-[#262a30] gap-1",children:[a.jsx("img",{src:"/images/coin.webp",alt:"coin",className:"size-4 mx-2"}),a.jsx("input",{type:"number",value:o,disabled:u,onChange:h=>r(Number(h.target.value)),className:"w-full bg-transparent outline-none font-[flamasb] flex-1"}),a.jsx("span",{onClick:()=>!u&&r(o*2),className:"text-xs text-[#bcbebf] bg-[#31353dee] p-3 mx-1 rounded-md",style:{cursor:u?"not-allowed":"pointer",opacity:u?.5:1},children:"X2"}),a.jsx("span",{onClick:()=>!u&&r(Math.floor(o/2)),className:"text-xs text-[#bcbebf] bg-[#31353dee] p-3 rounded-md",style:{cursor:u?"not-allowed":"pointer",opacity:u?.5:1},children:"1/2"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[#bcbebf] text-sm font-[flamasb]",children:"RISK"}),a.jsxs("div",{className:"flex flex-row items-center w-full p-2 gap-2",children:[a.jsx("button",{className:"flex-1 p-3 rounded-md bg-[#262a30] text-[#bcbebf] text-xs outline-0",style:{backgroundColor:n==="low"?"#00800030":"#262a30",color:n==="low"?"#fff":"#bcbebf",border:n==="low"?"2px solid #008000":"2px solid transparent"},disabled:u,onClick:()=>i("low"),children:"LOW"}),a.jsx("button",{className:"flex-1 p-3 rounded-md bg-[#262a30] text-[#bcbebf] text-xs outline-0",style:{backgroundColor:n==="medium"?"#00800030":"#262a30",color:n==="medium"?"#fff":"#bcbebf",border:n==="medium"?"2px solid #008000":"2px solid transparent"},disabled:u,onClick:()=>i("medium"),children:"MEDIUM"}),a.jsx("button",{className:"flex-1 p-3 rounded-md bg-[#262a30] text-[#bcbebf] text-xs outline-0",style:{backgroundColor:n==="high"?"#00800030":"#262a30",color:n==="high"?"#fff":"#bcbebf",border:n==="high"?"2px solid #008000":"2px solid transparent"},disabled:u,onClick:()=>i("high"),children:"HIGH"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[#bcbebf] text-sm font-[flamasb]",children:"ROWS"}),a.jsxs("div",{className:"flex flex-row items-center w-full p-3 pr-8 rounded-md bg-[#262a30] gap-1",children:[a.jsx("p",{className:"px-4 font-[flamasb]",children:s}),a.jsxs(J,{className:"relative flex w-full touch-none select-none items-center",value:[s],onValueChange:f,max:16,min:8,step:1,disabled:u,children:[a.jsx(Z,{className:"relative h-2 w-full grow rounded-full bg-[#2A2D31]",children:a.jsx(Q,{className:"absolute my-auto top-[2px] h-1 rounded-full bg-[#00EE5C]"})}),a.jsx(ee,{className:"block size-4 rounded-full bg-[#00EE5C] ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[#bcbebf] text-sm font-[flamasb]",children:"BALLS"}),a.jsxs("div",{className:"flex flex-row items-center w-full p-3 pr-8 rounded-md bg-[#262a30] gap-1",children:[a.jsx("p",{className:"px-4 font-[flamasb]",children:d}),a.jsxs(J,{className:"relative flex w-full touch-none select-none items-center",value:[typeof d=="number"?d:1],onValueChange:v,max:9,min:1,step:1,disabled:u,children:[a.jsx(Z,{className:"relative h-2 w-full grow rounded-full bg-[#2A2D31]",children:a.jsx(Q,{className:"absolute my-auto top-[2px] h-1 rounded-full bg-[#00EE5C]"})}),a.jsx(ee,{className:"block size-4 rounded-full bg-[#00EE5C] ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})]})]})]}),a.jsx("div",{className:"flex flex-col p-4 gap-4",children:a.jsx("button",{className:"bg-[#00e258] rounded-md p-3 font-[flamasb]",onClick:S,disabled:u,style:{opacity:u?.5:1,cursor:u?"not-allowed":"pointer"},children:"PLAY"})})]})]})},ot=we(()=>{const[e,t]=l.useState("manual"),[o,r]=l.useState(0),[n,i]=l.useState("low"),[s,c]=l.useState(16),[d,m]=l.useState(9),{positions:S,collisions:u,win:f,isRunning:v}=ve(p=>p.plinko),{sendMessage:h,sessionId:x}=Se();l.useEffect(()=>{h({type:"join",roomKey:`${n}-${s}`})},[s,n]);const b=async()=>{const p=window.location.host,w=await(await fetch(`http://${p}/api/plinko`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bet:o,risk:n,rows:s,balls:d,option:e,sessionId:x})})).json();h(w)};return a.jsxs("div",{className:"flex flex-row h-full",children:[a.jsx(Ce,{rows:s,collisions:u,positions:S,win:f,risk:n}),a.jsx(Qe,{option:e,setOption:t,bet:o,setBet:r,risk:n,setRisk:i,rows:s,setRows:c,balls:d,setBalls:m,play:b,isRunning:v})]})});export{ot as default};
